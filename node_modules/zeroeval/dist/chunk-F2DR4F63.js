// src/observability/pendingSignals.ts
var traceBuffer = {};
var sessionBuffer = {};
function addPendingTraceSignal(traceId, name, signal) {
  const bucket = traceBuffer[traceId] || (traceBuffer[traceId] = {});
  bucket[name] = signal;
}
function popPendingTraceSignals(traceId) {
  const sigs = traceBuffer[traceId];
  if (sigs)
    delete traceBuffer[traceId];
  return sigs;
}
function addPendingSessionSignal(sessionId, name, signal) {
  const bucket = sessionBuffer[sessionId] || (sessionBuffer[sessionId] = {});
  bucket[name] = signal;
}
function popPendingSessionSignals(sessionId) {
  const sigs = sessionBuffer[sessionId];
  if (sigs)
    delete sessionBuffer[sessionId];
  return sigs;
}

export {
  addPendingTraceSignal,
  popPendingTraceSignals,
  addPendingSessionSignal,
  popPendingSessionSignals
};
